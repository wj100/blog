<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>myUtils.js-工作中常用的工具函数 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="文件下载export const download &#x3D; (res, type, filename) &#x3D;&gt; &amp;#123;   &#x2F;&#x2F; 创建blob对象，解析流数据   const blob &#x3D; new Blob([res], &amp;#123;     &#x2F;&#x2F; 设置返回的文件类型     &#x2F;&#x2F; type: &#39;application&#x2F;pdf;charset&#x3D;UTF-8&#39; 表示下载文档为pd">
<meta property="og:type" content="article">
<meta property="og:title" content="myUtils.js-工作中常用的工具函数">
<meta property="og:url" content="http://example.com/2023/01/11/myUtils.js-%E5%B7%A5%E4%BD%9C%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="文件下载export const download &#x3D; (res, type, filename) &#x3D;&gt; &amp;#123;   &#x2F;&#x2F; 创建blob对象，解析流数据   const blob &#x3D; new Blob([res], &amp;#123;     &#x2F;&#x2F; 设置返回的文件类型     &#x2F;&#x2F; type: &#39;application&#x2F;pdf;charset&#x3D;UTF-8&#39; 表示下载文档为pd">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2023-01-11T05:59:02.874Z">
<meta property="article:modified_time" content="2023-01-11T05:59:02.874Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-myUtils.js-工作中常用的工具函数" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/01/11/myUtils.js-%E5%B7%A5%E4%BD%9C%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0/" class="article-date">
  <time class="dt-published" datetime="2023-01-11T05:59:02.874Z" itemprop="datePublished">2023-01-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      myUtils.js-工作中常用的工具函数
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="文件下载"><a href="#文件下载" class="headerlink" title="文件下载"></a>文件下载</h2><pre><code>export const download = (res, type, filename) =&gt; &#123;
  // 创建blob对象，解析流数据
  const blob = new Blob([res], &#123;
    // 设置返回的文件类型
    // type: &#39;application/pdf;charset=UTF-8&#39; 表示下载文档为pdf，如果是word则设置为msword，excel为excel
    type: type
  &#125;)
  // 这里就是创建一个a标签，等下用来模拟点击事件
  const a = document.createElement(&#39;a&#39;)
  // 兼容webkix浏览器，处理webkit浏览器中href自动添加blob前缀，默认在浏览器打开而不是下载
  const URL = window.URL || window.webkitURL
  // 根据解析后的blob对象创建URL 对象
  const herf = URL.createObjectURL(blob)
  // 下载链接
  a.href = herf
  // 下载文件名,如果后端没有返回，可以自己写a.download = &#39;文件.pdf&#39;
  a.download = filename
  document.body.appendChild(a)
  // 点击a标签，进行下载 
  a.click()
  // 收尾工作，在内存中移除URL 对象
  document.body.removeChild(a)
  window.URL.revokeObjectURL(herf)
&#125;
</code></pre>
<h2 id="判断真"><a href="#判断真" class="headerlink" title="判断真"></a>判断真</h2><pre><code>const isTrue = (k) =&gt; &#123;
    if (typeof k === &#39;string&#39;) &#123;
        return k === &#39;true&#39;;
    &#125;
    return !!k;
&#125;
</code></pre>
<h2 id="过滤对象中的空值"><a href="#过滤对象中的空值" class="headerlink" title="过滤对象中的空值"></a>过滤对象中的空值</h2><pre><code>function filterNonNull(obj) &#123;
        return Object.fromEntries(Object.entries(obj).filter(([k, v]) =&gt; v));
    &#125;
     const queryString=(qs.stringify(filterNonNull(query)))
</code></pre>
<h2 id="忽略ts报错"><a href="#忽略ts报错" class="headerlink" title="忽略ts报错"></a>忽略ts报错</h2><pre><code>单行忽略
// @ts-ignore

忽略全文
// @ts-nocheck

取消忽略全文
// @ts-check
</code></pre>
<h2 id="字符串转json"><a href="#字符串转json" class="headerlink" title="字符串转json"></a>字符串转json</h2><pre><code>function strToJson(str)&#123;
var json = (new Function(&quot;return &quot; + str))();
return json;
&#125;

//兼容ie
function strToJson(str)&#123;
if(!str)&#123;
        return undefined
    &#125;
    var json = eval(&#39;(&#39; + str + &#39;)&#39;);
    return json;
&#125;
</code></pre>
<h2 id="按字母给对象排序"><a href="#按字母给对象排序" class="headerlink" title="按字母给对象排序"></a>按字母给对象排序</h2><pre><code>function objKeySort(obj) &#123;//排序的函数
    var newkey = Object.keys(obj).sort();
　　//先用Object内置类的keys方法获取要排序对象的属性名，再利用Array原型上的sort方法对获取的属性名进行排序，newkey是一个数组
    var newObj = &#123;&#125;;//创建一个新的对象，用于存放排好序的键值对
    for (var i = 0; i &lt; newkey.length; i++) &#123;//遍历newkey数组
        newObj[newkey[i]] = obj[newkey[i]];//向新创建的对象中按照排好的顺序依次增加键值对
    &#125;
    return newObj;//返回排好序的新对象
&#125;
</code></pre>
<h2 id="移动端适配"><a href="#移动端适配" class="headerlink" title="移动端适配"></a>移动端适配</h2><pre><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0&quot;&gt;
</code></pre>
<h2 id="移动端隐藏滚动条"><a href="#移动端隐藏滚动条" class="headerlink" title="移动端隐藏滚动条"></a>移动端隐藏滚动条</h2><pre><code>html,body&#123; width: 100%; height: 100%; overflow: scroll;&#125;
html::-webkit-scrollbar, body::-webkit-scrollbar&#123;width:0px;height:0px;&#125;
body&#123;margin:0;&#125;

.yearReport-page::-webkit-scrollbar&#123;width:0px;height:0px;&#125;
</code></pre>
<h2 id="获取屏幕缩放比"><a href="#获取屏幕缩放比" class="headerlink" title="获取屏幕缩放比"></a>获取屏幕缩放比</h2><pre><code>function detectZoom() &#123;
        var ratio = 0,
            screen = window.screen,
            ua = navigator.userAgent.toLowerCase();
 
        if (window.devicePixelRatio !== undefined) &#123;
            ratio = window.devicePixelRatio;
        &#125;
        else if (~ua.indexOf(&#39;msie&#39;)) &#123;
            if (screen.deviceXDPI &amp;&amp; screen.logicalXDPI) &#123;
                ratio = screen.deviceXDPI / screen.logicalXDPI;
            &#125;
        &#125;
        else if (window.outerWidth !== undefined &amp;&amp; window.innerWidth !== undefined) &#123;
            ratio = window.outerWidth / window.innerWidth;
        &#125;
 
        if (ratio) &#123;
            ratio = Math.round(ratio * 100);
        &#125;
        return ratio/100;

 &#125;
</code></pre>
<h2 id="echart响应式字体"><a href="#echart响应式字体" class="headerlink" title="echart响应式字体"></a>echart响应式字体</h2><pre><code>//获取屏幕宽度并计算比例.按1920传入size
function fontSize(res) &#123;
    let clientWidth =
        window.innerWidth ||
        document.documentElement.clientWidth ||
        document.body.clientWidth;
    if (!clientWidth) return;
    let fontSize = clientWidth / 1920;
    return res * fontSize;
&#125;
</code></pre>
<h2 id="rem自适应js"><a href="#rem自适应js" class="headerlink" title="rem自适应js"></a>rem自适应js</h2><pre><code>//designWidth:设计稿的实际宽度值，需要根据实际设置
//maxWidth:制作稿的最大宽度值，需要根据实际设置
//这段js的最后面有两个参数记得要设置，一个为设计稿实际宽度，一个为制作稿最大宽度，例如设计稿为750，最大宽度为750，则为(750,750)
;(function(designWidth, maxWidth) &#123;
    var doc = document,
    win = window,
    docEl = doc.documentElement,
    remStyle = document.createElement(&quot;style&quot;),
    tid;

    function refreshRem() &#123;
        var width = docEl.getBoundingClientRect().width;
        maxWidth = maxWidth || 540;
        width&gt;maxWidth &amp;&amp; (width=maxWidth);
        var rem = width * 100 / designWidth;
        remStyle.innerHTML = &#39;html&#123;font-size:&#39; + rem + &#39;px;&#125;&#39;;
    &#125;

    if (docEl.firstElementChild) &#123;
        docEl.firstElementChild.appendChild(remStyle);
    &#125; else &#123;
        var wrap = doc.createElement(&quot;div&quot;);
        wrap.appendChild(remStyle);
        doc.write(wrap.innerHTML);
        wrap = null;
    &#125;
    //要等 wiewport 设置好后才能执行 refreshRem，不然 refreshRem 会执行2次；
    refreshRem();

    win.addEventListener(&quot;resize&quot;, function() &#123;
        clearTimeout(tid); //防止执行两次
        tid = setTimeout(refreshRem, 300);
    &#125;, false);

    win.addEventListener(&quot;pageshow&quot;, function(e) &#123;
        if (e.persisted) &#123; // 浏览器后退的时候重新计算
            clearTimeout(tid);
            tid = setTimeout(refreshRem, 300);
        &#125;
    &#125;, false);

    if (doc.readyState === &quot;complete&quot;) &#123;
        doc.body.style.fontSize = &quot;16px&quot;;
    &#125; else &#123;
        doc.addEventListener(&quot;DOMContentLoaded&quot;, function(e) &#123;
            doc.body.style.fontSize = &quot;16px&quot;;
        &#125;, false);
    &#125;
&#125;)(750, 750);
</code></pre>
<h2 id="js随机色"><a href="#js随机色" class="headerlink" title="js随机色"></a>js随机色</h2><pre><code>function randomHexColor() &#123; //随机生成十六进制颜色
 return &#39;#&#39; + (&#39;00000&#39; + (Math.random() * 0x1000000 &lt;&lt; 0).toString(16)).substr(-6);
&#125;
</code></pre>
<h2 id="jsonp"><a href="#jsonp" class="headerlink" title="jsonp"></a>jsonp</h2><pre><code>function jsonp(url, data = &#123;&#125;, callback = &#39;callback&#39;) &#123;
    //处理json对象，拼接url
    data.jsonpcallback = callback
    let params = []
    for (let key in data) &#123;
        params.push(key + &#39;=&#39; + data[key])
    &#125;
    let script = document.createElement(&#39;script&#39;)
    script.src = url + &#39;?&#39; + params.join(&#39;&amp;&#39;)
    document.body.appendChild(script)
    //返回Promise
    return new Promise((resolve, reject) =&gt; &#123;
        window[callback] = data =&gt; &#123;
            try &#123;
                resolve(data)
            &#125; catch (e) &#123;
                reject(e)
            &#125; finally &#123;
                //移除script元素
                script.parentNode.removeChild(script)
                // window[callback] = null
                delete window[callback]
            &#125;
        &#125;
    &#125;)
&#125;
</code></pre>
<h2 id="字节转化"><a href="#字节转化" class="headerlink" title="字节转化"></a>字节转化</h2><pre><code>function bytesToSize(bytes:number) &#123;
  if (bytes === 0) return &#39;0 B&#39;;
  const k = 1024;
  const sizes = [&#39;B&#39;, &#39;KB&#39;, &#39;MB&#39;, &#39;GB&#39;, &#39;TB&#39;, &#39;PB&#39;, &#39;EB&#39;, &#39;ZB&#39;, &#39;YB&#39;];
  const i = Math.floor(Math.log(bytes) / Math.log(k));
  return (bytes / (k**i)).toFixed(2) + &#39; &#39; + sizes[i];
&#125;
</code></pre>
<h2 id="千位分字符"><a href="#千位分字符" class="headerlink" title="千位分字符"></a>千位分字符</h2><pre><code>function milliFormat(num) &#123;
    return num &amp;&amp; num.toString()
        .replace(/\d+/, function(s)&#123;
             return s.replace(/(\d)(?=(\d&#123;3&#125;)+$)/g, &#39;$1,&#39;)
         &#125;)
&#125;
</code></pre>
<h2 id="删除url指定参数"><a href="#删除url指定参数" class="headerlink" title="删除url指定参数"></a>删除url指定参数</h2><pre><code>function removeURLParameter(url, parameter) &#123;
    var urlparts = url.split(&#39;?&#39;);
    if(urlparts.length &gt;= 2) &#123;
        //参数名前缀
        var prefix = encodeURIComponent(parameter) + &#39;=&#39;;
        var pars = urlparts[1].split(/[&amp;;]/g);
 
        //循环查找匹配参数
        for(var i = pars.length; i-- &gt; 0;) &#123;
            if(pars[i].lastIndexOf(prefix, 0) !== -1) &#123;
                //存在则删除
                pars.splice(i, 1);
            &#125;
        &#125;
 
        return urlparts[0] + (pars.length &gt; 0 ? &#39;?&#39; + pars.join(&#39;&amp;&#39;) : &#39;&#39;);
    &#125;
    return url;
&#125;
</code></pre>
<h2 id="css自定义属性"><a href="#css自定义属性" class="headerlink" title="css自定义属性"></a>css自定义属性</h2><pre><code>/* 属性定义宽度 */
const data_w = document.querySelectorAll(&#39;[data-w]&#39;)
for (let i = 0, length = data_w.length; i &lt; length; i++) &#123;
    data_w[i].style.width = data_w[i].getAttribute(&#39;data-w&#39;) + &#39;px&#39;
&#125;
</code></pre>
<h2 id="获取cookie"><a href="#获取cookie" class="headerlink" title="获取cookie"></a>获取cookie</h2><pre><code>function getCookie(name)&#123;    
    var arr = document.cookie.match(new RegExp(&quot;(^| )&quot;+name+&quot;=([^;]*)(;|$)&quot;));  
    if(arr != null) 
        return decodeURI(arr[2]);
    return null;  
&#125;
</code></pre>
<h2 id="写cookie"><a href="#写cookie" class="headerlink" title="写cookie"></a>写cookie</h2><pre><code>function setCookie(cName, cValue, days) &#123;  
    var expires = new Date();  
    expires.setTime(expires.getTime() + parseInt(days) * 24 * 60 * 60 * 1000);  
    document.cookie = cName + &quot;=&quot; + escape(cValue) + &quot;;expires=&quot; + expires.toGMTString()+&quot;;path=/;domain=xxx.cn&quot;;  
&#125;;
</code></pre>
<h2 id="判断客户端"><a href="#判断客户端" class="headerlink" title="判断客户端"></a>判断客户端</h2><pre><code>function isPC()&#123;  
   let userAgentInfo = navigator.userAgent
   let Agents = new Array(&#39;Android&#39;, &#39;iPhone&#39;, &#39;SymbianOS&#39;, &#39;Windows Phone&#39;, &#39;iPad&#39;, &#39;iPod&#39;)  
   let flag = true  
   for (let v = 0; v &lt; Agents.length; v++) &#123;  
       if (userAgentInfo.indexOf(Agents[v]) &gt; 0) &#123; flag = false; break &#125;  
   &#125;  
   return flag  
&#125;
</code></pre>
<h2 id="获取地址栏参数"><a href="#获取地址栏参数" class="headerlink" title="获取地址栏参数"></a>获取地址栏参数</h2><pre><code>function getQueryString(name) &#123;
    let reg = new RegExp(&quot;(^|&amp;)&quot; + name + &quot;=([^&amp;]*)(&amp;|$)&quot;, &quot;i&quot;);
    let r = window.location.search.substr(1).match(reg);
    if (r != null) &#123;
        return unescape(r[2]);
    &#125;;
    return null;
 &#125;
</code></pre>
<h2 id="正则"><a href="#正则" class="headerlink" title="正则"></a>正则</h2><h3 id="域名校验"><a href="#域名校验" class="headerlink" title="域名校验"></a>域名校验</h3><pre><code>/^([a-zA-Z\d][a-zA-Z\d-_]+\.)+[a-zA-Z\d-_][^ ]*$/
</code></pre>
<h3 id="匹配-开头-结尾"><a href="#匹配-开头-结尾" class="headerlink" title="匹配[开头]结尾"></a>匹配[开头]结尾</h3><pre><code>/(?&lt;=\[).*?(?=\])/g

str = str.match(/aaa([\s\S]*?)fff/)[1];
</code></pre>
<h3 id="匹配-之前"><a href="#匹配-之前" class="headerlink" title="匹配@之前"></a>匹配@之前</h3><pre><code>str = str.match(/(\S*)@/)[1];
</code></pre>
<h3 id="匹配-之后"><a href="#匹配-之后" class="headerlink" title="匹配@之后"></a>匹配@之后</h3><pre><code>str = str.match(/@(\S*)/)[1];
</code></pre>
<h3 id="正则提取ip"><a href="#正则提取ip" class="headerlink" title="正则提取ip"></a>正则提取ip</h3><pre><code>const a = /((2[0-4]\d|25[0-5]|[01]?\d\d?)\.)&#123;3&#125;(2[0-4]\d|25[0-5]|[01]?\d\d?)/
let str=&quot;dsfg[\&quot;0.0.0.0/0\&quot;],fs&quot;
str.match(a)
</code></pre>
<h2 id="正则提取邮箱"><a href="#正则提取邮箱" class="headerlink" title="正则提取邮箱"></a>正则提取邮箱</h2><pre><code>[a-zA-Z0-9_]&#123;3,20&#125;@[a-zA-Z0-9]&#123;2,10&#125;[.](com|cn|org)
var a1=/[\w-|*]+@[\w]+\.[a-zA-Z0-9]+/
var str1=&quot;fasf[\&quot;rr-o@dev.com\&quot;]fkasf&quot;
str1.match(a1)
</code></pre>
<h2 id="isTrue"><a href="#isTrue" class="headerlink" title="isTrue"></a>isTrue</h2><pre><code>function isTrue(k) &#123;
  if (typeof k === &#39;string&#39;) &#123;
    return k === &#39;true&#39;;
  &#125;
  return !!k;
&#125;
</code></pre>
<h2 id="防抖函数"><a href="#防抖函数" class="headerlink" title="防抖函数"></a>防抖函数</h2><pre><code>/**
 * @desc 函数防抖
 * @param func 函数
 * @param wait 延迟执行毫秒数
 * @param immediate true 表立即执行，false 表非立即执行
 */
function debounce(func,wait,immediate) &#123;
    let timeout;
    return function () &#123;
        let context = this;
        let args = arguments;

        if (timeout) clearTimeout(timeout);
        if (immediate) &#123;
            var callNow = !timeout;
            timeout = setTimeout(() =&gt; &#123;
                timeout = null;
            &#125;, wait)
            if (callNow) func.apply(context, args)
        &#125;
        else &#123;
            timeout = setTimeout(function()&#123;
                func.apply(context, args)
            &#125;, wait);
        &#125;
    &#125;
&#125;
</code></pre>
<h2 id="节流函数"><a href="#节流函数" class="headerlink" title="节流函数"></a>节流函数</h2><pre><code>/**
 * @desc 函数节流
 * @param func 函数
 * @param wait 延迟执行毫秒数
 * @param type 1 表时间戳版，2 表定时器版
 */
 function throttle(fn, wait = 500) &#123;
    let prev = 0
    return function() &#123;
    let args = arguments
    let now = Date.now()
    if (now - prev &gt; wait) &#123;
      console.log(this)//谁调用就指向谁
      fn.apply(this, args)
      prev = now
    &#125;
  &#125;
&#125;
</code></pre>
<h2 id="深拷贝函数"><a href="#深拷贝函数" class="headerlink" title="深拷贝函数"></a>深拷贝函数</h2><pre><code>const deepClone = obj =&gt; &#123;
  let clone = obj;
  if (obj &amp;&amp; typeof obj === &quot;object&quot;) &#123;
    clone = new obj.constructor();
    
    Object.getOwnPropertyNames(obj).forEach(
      prop =&gt; (clone[prop] = deepClone(obj[prop]))
    );
  &#125;
  return clone;
&#125;;

function clone(target, map = new Map()) &#123;
    if (typeof target === &#39;object&#39;) &#123;
        let cloneTarget = Array.isArray(target) ? [] : &#123;&#125;;
        if (map.get(target)) &#123;
            return map.get(target);
        &#125;
        map.set(target, cloneTarget);
        for (const key in target) &#123;
            cloneTarget[key] = clone(target[key], map);
        &#125;
        return cloneTarget;
    &#125; else &#123;
        return target;
    &#125;
&#125;;
</code></pre>
<h2 id="转时间格式-到秒"><a href="#转时间格式-到秒" class="headerlink" title="转时间格式,到秒"></a>转时间格式,到秒</h2><pre><code>/*new Date()
* @params date
* return  str
* */
function formatDateTime(date) &#123;
    let y = date.getFullYear();
    let m = date.getMonth() + 1;
    m = m &lt; 10 ? (&#39;0&#39; + m) : m;
    let d = date.getDate();
    d = d &lt; 10 ? (&#39;0&#39; + d) : d;
    let h = date.getHours();
    h=h &lt; 10 ? (&#39;0&#39; + h) : h;
    let minute = date.getMinutes();
    minute = minute &lt; 10 ? (&#39;0&#39; + minute) : minute;
    let second=date.getSeconds();
    second=second &lt; 10 ? (&#39;0&#39; + second) : second;
    return y + &#39;-&#39; + m + &#39;-&#39; + d+&#39; &#39;+h+&#39;:&#39;+minute+&#39;:&#39;+second;
&#125;;
//时间戳格式化
    timestampToTime(timestamp) &#123;
      let date = new Date(timestamp);//时间戳为10位需*1000，时间戳为13位的话不需乘1000
      let Y = date.getFullYear() + &#39;-&#39;;
      let M = (date.getMonth() + 1 &lt; 10 ? &#39;0&#39; + (date.getMonth() + 1) : date.getMonth() + 1) + &#39;-&#39;;
      let D = (date.getDate() &lt; 10 ? &#39;0&#39; + date.getDate() : date.getDate()) + &#39; &#39;;
      let h = (date.getHours() &lt; 10 ? &#39;0&#39; + date.getHours() : date.getHours())+ &#39;:&#39;;
      let m = (date.getMinutes() &lt; 10 ? &#39;0&#39; + date.getMinutes() : date.getMinutes())+ &#39;:&#39;;
      let s = date.getSeconds() &lt; 10 ? &#39;0&#39; + date.getMinutes() : date.getMinutes();
      return Y + M + D + h + m + s;
    &#125;,
</code></pre>
<h2 id="生成随机验证码"><a href="#生成随机验证码" class="headerlink" title="生成随机验证码"></a>生成随机验证码</h2><pre><code>function mkLinks(num)&#123;
                var str=&quot;23QWERTYUIOPASDFGHJKLZXCVBNM1456789zxcvbnmasdfghjklqwertyuiop&quot;;
                var res=&#39;&#39;;
                for(var i=0;i&lt;num;i++)&#123;
                    res+=str[Math.floor(Math.random()*str.length)];
                &#125;
                return res;
            &#125;
</code></pre>
<h2 id="删除数组里指定下标的元素"><a href="#删除数组里指定下标的元素" class="headerlink" title="删除数组里指定下标的元素"></a>删除数组里指定下标的元素</h2><p>删除指定下标-返回删除后的数组 与splice()相似-返回删除的数组</p>
<pre><code>    Array.prototype.delete = function (delIndex) &#123;
        var temArray = [];
        for (var i = 0; i &lt; this.length; i++) &#123;
            if (i != delIndex) &#123;
                temArray.push(this[i]);
            &#125;
        &#125;
        return temArray;
    &#125;;
</code></pre>
<h2 id="点击切换函数"><a href="#点击切换函数" class="headerlink" title="点击切换函数"></a>点击切换函数</h2><pre><code>function switchTab(btn) &#123;
        for (let i = 0; i &lt; btn.length; i++) &#123;
            btn[i].index = i;
            btn[i].onclick = function () &#123;
                for (let j = 0; j &lt; btn.length; j++) &#123;
                    btn[j].classList.remove(&quot;isCheck&quot;)
                    btn[this.index].classList.add(&quot;isCheck&quot;);
                &#125;
            &#125;
        &#125;
    &#125;
</code></pre>
<h2 id="js-map-格式转化为对象"><a href="#js-map-格式转化为对象" class="headerlink" title="js map 格式转化为对象"></a>js map 格式转化为对象</h2><pre><code>function  _strMapToObj(strMap)&#123;
    let obj= Object.create(null);
    for (let[k,v] of strMap) &#123;
      obj[k] = v;
    &#125;
    return obj;
  &#125;
</code></pre>
<h2 id="时间戳转时间"><a href="#时间戳转时间" class="headerlink" title="时间戳转时间"></a>时间戳转时间</h2><pre><code>function timestampToTime(timestamp) &#123;
  var date = new Date(timestamp * 1000);//时间戳为10位需*1000，时间戳为13位的话不需乘1000
  var Y = date.getFullYear() + &#39;-&#39;;
  var M = (date.getMonth() + 1 &lt; 10 ? &#39;0&#39; + (date.getMonth() + 1) : date.getMonth() + 1) + &#39;-&#39;;
  var D = date.getDate() + &#39; &#39;;
  var h = date.getHours() + &#39;:&#39;;
  var m = date.getMinutes() + &#39;:&#39;;
  var s = date.getSeconds();
  return Y + M + D + h + m + s;
&#125;
</code></pre>
<h2 id="一键复制"><a href="#一键复制" class="headerlink" title="一键复制"></a>一键复制</h2><pre><code>/*一键复制函数*/
    function copyUrl(data) &#123;
        let url = data;
        let oInput = document.createElement(&#39;input&#39;);
        oInput.value = url;
        document.body.appendChild(oInput);
        oInput.select(); // 选择对象;
        console.log(oInput.value)
        document.execCommand(&quot;Copy&quot;); // 执行浏览器复制命令
        alert(&#39;复制成功&#39;)
        oInput.remove()
    &#125;
</code></pre>
<h2 id="初始化rem"><a href="#初始化rem" class="headerlink" title="初始化rem"></a>初始化rem</h2><pre><code>function refreshRem() &#123;
    var docEl = doc.documentElement;
    var width = docEl.getBoundingClientRect().width;
    var rem = width / 10;
    docEl.style.fontSize = rem + &#39;px&#39;;
    flexible.rem = win.rem = rem;
&#125;
win.addEventListener(&#39;resize&#39;, refreshRem);
</code></pre>
<h2 id="获取url参数"><a href="#获取url参数" class="headerlink" title="获取url参数"></a>获取url参数</h2><pre><code>function getUrlParams(name) &#123; // 不传name返回所有值，否则返回对应值
    var url = window.location.search;
    if (url.indexOf(&#39;?&#39;) == 1) &#123; return false; &#125;
    url = url.substr(1);
    url = url.split(&#39;&amp;&#39;);
    var name = name || &#39;&#39;;
    var nameres;
    // 获取全部参数及其值
    for(var i=0;i&lt;url.length;i++) &#123;
        var info = url[i].split(&#39;=&#39;);
        var obj = &#123;&#125;;
        obj[info[0]] = decodeURI(info[1]);
        url[i] = obj;
    &#125;
    // 如果传入一个参数名称，就匹配其值
    if (name) &#123;
        for(var i=0;i&lt;url.length;i++) &#123;
            for (const key in url[i]) &#123;
                if (key == name) &#123;
                    nameres = url[i][key];
                &#125;
            &#125;
        &#125;
    &#125; else &#123;
        nameres = url;
    &#125;
    // 返回结果
    return nameres;
&#125;

 getParams(url) &#123;
        const index = url.indexOf(&#39;?&#39;) + 1
        const params = url.slice(index).split(&#39;&amp;&#39;)
        const obj=&#123;&#125;
        for(let i =0;i&lt;params.length;i++)&#123;
          obj[params[i].split(&quot;=&quot;)[0]]=params[i].split(&quot;=&quot;)[1]
        &#125;
        return obj;
      &#125;
</code></pre>
<h3 id="计算坐标集中心点"><a href="#计算坐标集中心点" class="headerlink" title="计算坐标集中心点"></a>计算坐标集中心点</h3><pre><code>calculateCenter(lnglatarr) &#123;
        let total = lnglatarr.length
        let X = 0, Y = 0, Z = 0
        lnglatarr.forEach((lnglat, index) =&gt; &#123;
          let lng = lnglat[0] * Math.PI / 180
          let lat = lnglat[1].includes(&#39;#&#39;)?lnglat[2] * Math.PI / 180:lnglat[1] * Math.PI / 180
          let x, y, z
          x = Math.cos(lat) * Math.cos(lng)
          y = Math.cos(lat) * Math.sin(lng)
          z = Math.sin(lat)
          X += x
          Y += y
          Z += z
        &#125;)
        X = X / total
        Y = Y / total
        Z = Z / total
        let Lng = Math.atan2(Y, X)
        let Hyp = Math.sqrt(X * X + Y * Y)
        let Lat = Math.atan2(Z, Hyp)
        return [Lng * 180 / Math.PI, Lat * 180 / Math.PI]
      &#125;,
</code></pre>
<h3 id="resetStyle"><a href="#resetStyle" class="headerlink" title="resetStyle"></a>resetStyle</h3><pre><code>html&#123;
   /* 标准字体大小可以，在移动端使用的rem适配的话会动态改变。 */
  font-size:14px;
  /*  使用IE盒模型（个人取舍，我一般设置width是这是盒子的真实大小，包括padding和border） */
  box-sizing: border-box;
  
&#125;

html,body&#123;
   /* 在有些手机浏览器中点击一个链接或着可点击元素的时候，会出现一个半透明的灰色背景； */
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
    /* 提升移动端滚动的体验效果  */
  -webkit-overflow-scrolling: touch;
  overflow-scrolling: touch;
   /* 与浏览器窗口高度一致 */
  height: 100%;
&#125;

body&#123;
   /* 有些背景默认为浅灰色，所以统一设置为纯白 */
  background: #fff;
   /* 照着antd上面来的，在公司就别用微软雅黑了，不建议字体使用rem。 */
  font:14px,-apple-system,BlinkMacSystemFont,&#39;Segoe UI&#39;,&#39;PingFang SC&#39;,&#39;Hiragino Sans GB&#39;,&#39;Microsoft YaHei&#39;,
  &#39;Helvetica Neue&#39;,Helvetica,Arial,sans-serif,&#39;Apple Color Emoji&#39;,&#39;Segoe UI Emoji&#39;,&#39;Segoe UI Symbol&#39;
   /* 使字体更加顺滑 */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
&#125;

 /* 去除浏览器默认的margin和padding, 自行删减一些不必要的标签 */
body,
p,
h1,
h2,
h3,
h4,
h5,
h6,
dl,
dd,
ul,
ol,
th,
td,
button,
figure,
input,
textarea,
form,
pre,
blockquote,
figure&#123;
margin: 0;
padding: 0;
&#125;

a&#123;
   /* 小手 */
  cursor: pointer;
   /* 取消超链接的默认下划线 */
  text-decoration:none;
   /* antd里面还做了 ， 看你团队需不需要这样的风格 */
  transition: color 0.3s ease;
&#125;

ol,
ul&#123;
   /* 去除自带的ugly样式。 */
  list-style:none     
&#125;

 /* 这些节点部分属性没有继承父节点样式，所有继承一下，并取消outline，外轮廓的效果 */
a,
h1,
h2,
h3,
h4,
h5,
h6,
input,
select,
button,
textarea &#123;
font-family: inherit;
font-size: inherit;
font-weight: inherit;
font-style: inherit;
line-height: inherit;
color: inherit;
outline: none;
&#125;

button,
input[type=&#39;submit&#39;],
input[type=&#39;button&#39;] &#123;
 /* 可点击小手 */
cursor: pointer;
&#125;
 /* 取消部分浏览器数字输入控件的操作按钮 apperance可以改变控件的外观。 */
input[type=&#39;number&#39;] &#123;
-moz-appearance: textfield;
&#125;
input[type=number]::-webkit-inner-spin-button,
input[type=number]::-webkit-outer-spin-button &#123;
margin: 0;
-webkit-appearance: none;
&#125;
/**
 * 删除Firefox中的内边框和填充。
 */
button::-moz-focus-inner,
[type=&quot;button&quot;]::-moz-focus-inner,
[type=&quot;reset&quot;]::-moz-focus-inner,
[type=&quot;submit&quot;]::-moz-focus-inner &#123;
  border-style: none;
  padding: 0;
&#125;
/**
 * 让html5中的hidden在IE10中正确显示
 */

[hidden] &#123;
  display: none;
&#125;
template &#123;
 /* 有些浏览器会显示template 不过template标签用的也少，自行取舍。 */
display: none;
&#125;
</code></pre>
<h3 id="移动端css-reset"><a href="#移动端css-reset" class="headerlink" title="移动端css reset"></a>移动端css reset</h3><pre><code>@charset &quot;utf-8&quot;;
/* 禁用iPhone中Safari的字号自动调整 */
html &#123;
    -webkit-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
&#125;
/* 去除iPhone中默认的input样式 */
input[type=&quot;submit&quot;],
 
input[type=&quot;reset&quot;],
 
input[type=&quot;button&quot;],
 
input&#123;-webkit-appearance:none; resize: none;&#125;
/* 取消链接高亮  */
body,div,ul,li,ol,h1,h2,h3,h4,h5,h6,input,textarea,select,p,dl,dt,dd,a,img,button,form,table,th,tr,td,tbody,article, 
aside, details,figcaption,figure,footer,header,hgroup, menu,nav,section&#123; -webkit-tap-highlight-color:rgba(0, 0, 0, 0); &#125;
/* 设置HTML5元素为块 */
article, aside, details,figcaption,figure,footer,header,hgroup, menu,nav,section &#123;
display: block;
&#125;
/* 图片自适应 */
img &#123;
max-width: 100%;
height: auto;
width:auto\9; /* ie8 */
-ms-interpolation-mode:bicubic;/*为了照顾ie图片缩放失真*/
&#125;
/* 初始化 */
body,div,ul,li,ol,h1,h2,h3,h4,h5,h6,input,textarea,select,p,dl,dt,dd,a,img,button,form,table,th,tr,td,tbody,article, 
aside, details,figcaption,figure,footer,header,hgroup, menu,nav,section&#123;margin:0; padding:0; border:none;box-sizing: border-box;&#125;
body&#123;font: normal 14px/1.5 Tahoma,&quot;Lucida Grande&quot;,Verdana,&quot;Microsoft Yahei&quot;,STXihei,hei;&#125;
em,i&#123;font-style:normal;&#125;
strong&#123;font-weight: normal;&#125;
.clearfix:after&#123;content:&quot;&quot;; display:block; visibility:hidden; height:0; clear:both;&#125;
.clearfix&#123;zoom:1;&#125;
a&#123;text-decoration:none; color:#969696; font-family: &#39;宋体&#39;,Microsoft YaHei,Tahoma,Arial,sans-serif;&#125;
a:hover&#123;color:#fff; text-decoration:none;&#125;
ul,ol&#123;list-style:none;&#125;
h1, h2, h3, h4, h5, h6&#123; font-size:100%; font-family: Microsoft YaHei;&#125;
img&#123;border: none;&#125;
</code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/01/11/myUtils.js-%E5%B7%A5%E4%BD%9C%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0/" data-id="clcr94n6a000ctl0k65l5bcml" data-title="myUtils.js-工作中常用的工具函数" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2023/01/11/nginx%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8%E5%8F%8A%E4%BB%A3%E7%90%86%E8%B7%A8%E5%9F%9F/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          nginx基础使用及代理跨域
        
      </div>
    </a>
  
  
    <a href="/2023/01/11/vue%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85%E4%B9%8B%E5%90%8E,%E4%BF%AE%E6%94%B9%E5%90%8E%E5%8F%B0%E6%8E%A5%E5%8F%A3,%E4%BB%A5%E5%8F%8A%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E5%92%8C%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E6%8E%A5%E5%8F%A3%E9%85%8D%E7%BD%AE/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">vue项目打包之后,修改后台接口,以及生产环境和开发环境的接口配置</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/01/11/%E7%89%A9%E7%90%86%E6%9C%BA%E5%AE%89%E8%A3%85Ubuntu/">物理机安装Ubuntu</a>
          </li>
        
          <li>
            <a href="/2023/01/11/Enter%20passphrase%20for%20key(%E8%BE%93%E5%85%A5%E5%AF%86%E7%A0%81%E7%9F%AD%E8%AF%AD)/">Enter passphrase for key(输入密码短语)</a>
          </li>
        
          <li>
            <a href="/2023/01/11/mac%E7%94%B5%E8%84%91git%20clone%E6%8F%90%E7%A4%BA%E6%B2%A1%E6%9C%89%E6%9D%83%E9%99%90/">mac电脑git clone提示没有权限</a>
          </li>
        
          <li>
            <a href="/2023/01/11/echarts%E5%8F%AF%E6%8B%96%E6%8B%BD%E6%9F%B1%E5%BD%A2%E5%9B%BE/">echarts可拖拽柱形图</a>
          </li>
        
          <li>
            <a href="/2023/01/11/nginx%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8%E5%8F%8A%E4%BB%A3%E7%90%86%E8%B7%A8%E5%9F%9F/">nginx基础使用及代理跨域</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>